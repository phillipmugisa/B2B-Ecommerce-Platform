{% extends '../utils/layout.html' %}
{% load static %}
{% block content %}

    <section class="main w-12/12">
        <div class="page-starter grid w-full mx-auto cf-1 gap-4 overflow-hidden">
            <div class="hidden md:grid side-bar gap-3 content-start product-categories w-12/12 ">
                <div class="grid p-0 side-menu card rounded-none rounded-t-md overflow-hidden">
                    <h2 class="text-xl font-bold px-5 py-3" style="background-color: hsla(213, 28%, 90%, .8);">
                        Product Categories</h2>
                    <ul class="grid gap-0.5 px-5 py-2" data-context='{{ product_categories.context_name }}'>
                        
                        {% for category in product_categories.results %}  
                            <li
                                class="side-menu-item text-slate-800 hover:text-black transition-colors transition-200 ease-in" data-category-index="{{ forloop.counter }}">
                                <a class="flex items-center justify-start gap-2 py-2" href='{% url "supplier:category-detail" category.category.slug %}'>
                                    <i class="ti-folder"></i>
                                    <span>{{ category.category.name }}</span>
                                </a>
                            </li>
                        {% endfor %}
                    </ul>
                </div>
                <a class="side-menu-footer bg-yellowColor flex gap-1 px-6 items-center py-3 text-white rounded-b-md" href="{% url 'supplier:category-list' %}">
                    <i class="ti-menu"></i>
                    <span>All Categories</span>
                </a>
            </div>
            <div class="hidden promotion-area w-12/12 md:grid gap-3">
                <div class="upper grid gap-3 rounded-md overflow-hidden">
                    <div class="grid banner">
                        <img style="object-fit: cover;" src="../static/assets/imgs//resources/01.png" alt="">
                    </div>
                    <div class="grid grid-rows-2 cards gap-3">
                        <div class="grid grid-flow-row grid-cols-2 gap-3 card p-1">
                            <div class="grid small-item">
                                <div class="card-img-wrapper overflow-hidden rounded-none">
                                    <img src="../static/assets/imgs/resources/prod-1.jpg" style="object-fit: cover;"
                                        alt="">
                                </div>
                                <div class="body grid grid-flow-row">
                                    <span class="font-bold text-sm">USD 50.00</span>
                                </div>
                            </div>
                            <div class="grid small-item">
                                <div class="card-img-wrapper overflow-hidden rounded-none">
                                    <img src="../static/assets/imgs/resources/prod-1.jpg" style="object-fit: cover;"
                                        alt="">
                                </div>
                                <div class="body grid grid-flow-row">
                                    <span class="font-bold text-sm">USD 50.00</span>
                                </div>
                            </div>
                        </div>
                        <div class="grid card"></div>
                    </div>
                </div>
                <div class="lower grid gap-3 grid-flow-row grid-cols-2">
                    <div class="grid rounded-md overflow-hidden card">
                    </div>
                    <div class="grid rounded-md overflow-hidden banner-lower">
                        <img style="object-fit: cover;" src="../static/assets/imgs//resources/01.png" alt="">
                    </div>
                </div>
            </div>
            <div class="mobile promotion-area w-12/12 grid md:hidden gap-3">
                <div class="upper grid gap-3 rounded-md overflow-hidden">
                    <div class="grid banner">
                        <img style="object-fit: cover;" src="../static/assets/imgs//resources/01.png" alt="">
                    </div>
                </div>
                <div class="lower grid gap-3 grid-flow-row grid-cols-2">
                    <div class="grid rounded-md overflow-hidden card">
                    </div>
                    <div class="grid rounded-md overflow-hidden banner-lower">
                        <img style="object-fit: cover;" src="../static/assets/imgs//resources/01.png" alt="">
                    </div>
                </div>
            </div>
            <div class="hidden md:grid side-bar gap-3 content-start product-categories w-12/12">
                <div class="grid p-0 side-menu card rounded-none rounded-t-md overflow-hidden">
                    <h2 class="text-xl font-bold px-5 py-3" style="background-color: hsla(213, 28%, 90%, .8);">
                        Showrooms</h2>
                    <ul class="grid gap-0.5 px-5 py-2" data-context='{{ product_categories.context_name }}'>
                        {% for showroom in showrooms.results %}
                            <li
                                class="side-menu-item text-slate-800 hover:text-black transition-colors transition-200 ease-in">
                                <a class="flex items-center justify-start gap-2 py-2" href="{% url 'manager:showroom-detail' showroom.slug %}"  data-showroom-index="{{forloop.counter}}">
                                    <i class="ti-folder"></i>
                                    <span>{{ showroom.name }}</span>
                                </a>
                            </li>
                        {% endfor %}
                    </ul>
                </div>
                <a class="side-menu-footer bg-yellowColor flex gap-1 px-6 items-center py-3 text-white rounded-b-md" href="{% url 'manager:showrooms' %}">
                    <i class="ti-menu"></i>
                    <span>All Showrooms</span>
                </a>
            </div>
        </div>

    </section>

    <section class="main w-12/12">
        <div class="grid w-full mx-auto cf-1 gap-6">
            <div class="section-heading">
                <h2 class="sec-title text-xl capitalize md:text-2xl font-bold text-yellowColor">Foroden Marketplace</h2>
            </div>
            <div class="section-body grid gap-4 grid-cols-1 md:grid-cols-3">

                {% for category in product_categories.results %}   
                    <div class="section-item-group grid gap-2 rounded-md card p-4" >
                        <a href='{% url "supplier:category-detail" category.category.slug %}'class="section-item-group-title flex justify-between items-center"  data-category-group-index="{{ forloop.counter }}">
                            <span class="text-lg font-bold">{{ category.category.name }}</span>
                            <span class="text-sm text-slate-800 hover:text-yellowColor font-normal">View All</span>
                        </a>
                        <div class="section-item-group-content grid gap-4 grid-cols-3">
                            
                            {% for sub_category in category.sub_categories %}
                                <div class="item">
                                    <a class="grid gap-0.5" href='{% url "supplier:subcategory-detail" category.category sub_category.slug %}'  data-subcategory-index="{{ forloop.counter }}">
                                        <img loading="lazy"
                                            src="/media/{{sub_category.image}}"
                                            alt="Product" class="item-img rounded"
                                            style="width: 100%;aspect-ratio:1/1;object-fit:cover;border-radius: 0;">
                                        <div class="item-details grid gap-0 justify-start text-left justify-center">
                                            <h5 class="text-sm font-semibold leading-5 text-center">
                                                <span>{{sub_category.name}}</span>
                                            </h5>
                                            <!-- <h6 class="text-gray-600 text-xs">120 Products</h6> -->
                                        </div>
                                    </a>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </section>

    <section class="main w-12/12">
        <div class="grid md:w-full mx-auto p-2 md:p-0 cf-1 gap-4">
            <div class="section-body grid gap-2 card p-3 py-6 rounded-md">
                <div class="flex p-2 pt-0 justify-between items-baseline">
                    <div class="flex gap-5">
                        <h1 class="text-xl md:text-2xl text-yellowColor font-bold">Discounted Products</h1>
                        <h1 class="hidden md:flex gap-1 items-baseline text-lg text-slate-400 font-bold"><span
                                class="text-lg text-xl text-slate-500">30%</span> OFF</h1>
                    </div>
                    <a class="justify-self-end text-base text-slate-500 hover:text-slate-700" href="">View All</a>
                </div>
                <div class="grid gap-2 grid-cols-2 md:grid-cols-6">
                    {% for discount in discounts.results %}
                        <div class="promotion-card grid"  data-discount-index="{{forloop.counter}}">
                            <a class="grid gap-1 rounded-md" href="{% url 'supplier:product-detail' discount.product.slug %}">
                                <div class="grid p-2">
                                    <img loading="lazy" src="/media/{{discount.main_image.image}}" alt="{{discount.product.name}}" class="item-img rounded" style="width: 100%;aspect-ratio:1/.8;object-fit:cover;">
                                </div>
                                <div class="item-details grid gap-1 px-2">
                                    <h5 class="text-sm font-normal leading-5">
                                        {{discount.product.name}}
                                    </h5>
                                    <p class="text-base font-bold flex gap-2 items-baseline">
                                        {{discount.product.currency}} <span>{{discount.product.price}}</span><s class="text-slate-400 font-normal text-sm">{{discount.product.price}}</s>
                                    </p>
                                </div>
                            </a>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </section>

    <section class="main w-12/12 py-3">
        <div class="grid w-full mx-auto cf-1 gap-6">
            <div class="section-heading flex justify-between">
                <h2 class="sec-title text-xl capitalize md:text-2xl font-bold text-yellowColor">Foroden Showrooms</h2>
                <a class="justify-self-end text-base text-slate-500 hover:text-slate-700" href="">View All</a>
            </div>
            <div class="showroows section-body grid gap-4 horizontal-scroll items-start">
                
                {% for showroom in showrooms.results %}
                    <a href="{% url 'manager:showroom-detail' showroom.slug %}" class="grid card rounded overflow-hidden">
                        <div class="img-wrapper">
                            <img src="/media/{{showroom.image}}" style="object-fit: cover;" alt="{{showroom.name}}">
                        </div>
                        <div class="card-content grid gap-1 px-4 py-2 items-start">
                            <h2 class="text-lg md:text-lg bg-lightBackgroundColor">{{showroom.name}}</h2>
                            <!-- <p class="text-base text-slate-400 font-normal">10 Stores</p> -->
                        </div>
                    </a>
                {% endfor %}
            </div>
        </div>
    </section>

    <section class="main w-12/12 pt-0" style="height: auto">
        <div class="grid w-full mx-auto cf-1 gap-6" style="grid-template-columns: 1fr;">
            <div class="section-heading">
                <h2 class="sec-title text-xl capitalize md:text-2xl font-bold text-yellowColor">Popular Products</h2>
            </div>
            <div class="section-body grid gap-2 md:gap-6 grid-cols-2 md:grid-cols-5 card p-4"
                data-context="{{propular_products.context_name}}">
                
                {% for product in propular_products.results %}
                    <div class="single-image-product-card overflow-hidden rounded grid gap-0.5 card-outlined">
                        <a class="grid gap-2 rounded overflow-hidden" href="{% url 'supplier:product-detail' product.product.slug %}">
                            <img loading="lazy" src="/media/{{product.images.image}}" alt="{{product.name}}"
                                class="item-img rounded" style="width: 100%;object-fit:cover;">
                            <div class="item-details grid gap-0 py-1 md:py-2 px-4 gap-2"
                                style="border-bottom: 1px solid hsla(213, 28%, 19%, .1);border-top: 1px solid hsla(213, 28%, 19%, .1)">
                                <h5 class="text-sm font-bold leading-5 text-lightBackgroundColor">
                                    {{product.product.name}}
                                </h5>
                                <p class="text-xs font-medium">
                                    <span>{{product.product.currency}}</span>
                                    <span>{{product.product.price}}</span>
                                </p>
                            </div>
                            <span class="grid items-center pb-2 px-4 font-semibold text-sm">By {{ product.supplier }}</span>
                        </a>
                    </div>
                {% endfor %}

            </div>
        </div>
    </section>
{% endblock %}